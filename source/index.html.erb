---
title: Rails Performance Monitoring as part of CI
---

<script type="application/ld+json">
  {
    "@context": "http://schema.org/",
    "@type": "Product",
    "name": "PigCI",
    "image": "<%= image_path('logo_pigci.svg') %>",
    "description": "Track your apps performance via your Test Suite & stop slow downs before they're deployed",
    "sku": "pigci-early-bird",
    "brand": {
      "@type": "Thing",
      "name": "PigCI"
    },
    "review": {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5",
        "bestRating": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Mike Rogers"
      }
    },
    "aggregateRating": {
      "@type": "AggregateRating",
      "ratingValue": "5",
      "reviewCount": "1"
    },
    "offers": {
      "@type": "Offer",
      "priceCurrency": "USD",
      "price": "0.00",
      "url": "https://pigci.com/",
      "priceValidUntil": "2020-01-01",
      "availability": "http://schema.org/InStock",
      "seller": {
        "@type": "Organization",
        "name": "Full On Development"
      }
    }
  }
</script>

<header class="jumbotron jumbotron-fluid">
  <div class="container text-center pigci-section-hero">
    <h1 class="mb-3">Rails Performance Monitoring as part of CI</h1>

    <div class="row">
      <div class="col-12 col-md-8 offset-md-2">
        <p class="mb-8 h4">Track your apps performance via your Test Suite &amp; stop slow downs before they're deployed</p>
      </div>
    </div>

    <%= link_to(
      'Contribute via GitHub',
      'https://github.com/PigCI/pig-ci-rails',
      class: 'btn btn-primary mb-2',
      target: '_blank', rel: 'noopener'
    ) %>

    <div class="pigci-illustration-bacon"></div>
    <div class="pigci-illustration-tail"></div>
  </div>
</header>

<section class="container pigci-container-sp  mb-0 text-center">

  <h2>How it works</h2>
  <div class="pigci-hr pigci-hr-tail mb-8">
    <div class="left"></div>
    <% 8.times do %>
      <div class="middle"></div>
    <% end %>
    <div class="right"></div>
  </div>

  <div class="row">
    <div class="offset-md-1 col-md-5 mb-8">
      <h3>Install the Gem</h3>
      <div class="pigci-hr pigci-hr-wiggle mb-3">
        <div class="left"></div>
        <% 4.times do %>
          <div class="middle"></div>
        <% end %>
        <div class="right"></div>
      </div>
      <p class="text-left">Add our gem to your test suite, every time you run your test suite the gem will monitor your app &amp; log metrics such as database requests and memory usage.</p>
    </div>
    <div class="col-md-5 mb-8">
      <h3>See results</h3>
      <div class="pigci-hr pigci-hr-wiggle mb-3">
        <div class="left"></div>
        <% 3.times do %>
          <div class="middle"></div>
        <% end %>
        <div class="right"></div>
      </div>
      <p class="text-left">Commits that exceed a normal threshold will cause the test suite to fail, you can then investigate by reviewing the output.</p>
    </div>
  </div>
  
  <div class="card-deck card-deck--pricing text-center">
    <div class="card pigci-card-primary">
      <div class="card-body">
        <h3 class="mb-2 h3">Adding the Gem</h3>
        <p>Add the gem to your Gemfile within a test group, so it'll only run when you run the test suite:</p>
        <div class="text-left mb-5">
<% code("ruby") do %>
# Gemfile
group :test do
  gem 'pig-ci-rails'
end
<% end %>
        </div>
        <h3 class="mb-2 h3">Configuring thresholds</h3>
        <p>You can change the thresholds, when your test suite exceeds these it will fail.</p>

        <div class="text-left">
<% code("ruby") do %>
# spec/rails_helper.rb
require 'pig_ci'
PigCI.start do |config|
  # Maximum memory in megabytes
  config.thresholds.memory = 350

  # Maximum time per a HTTP request
  config.thresholds.request_time = 250

  # Maximum database calls per a request
  config.thresholds.database_request = 35
end if RSpec.configuration.files_to_run.count > 1
<% end %>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="container pigci-container-sp text-center">
  <h2>Supported Frameworks</h2>
  <div class="pigci-hr pigci-hr-tail mb-8">
    <div class="left"></div>
    <% 8.times do %>
      <div class="middle d-none d-sm-block"></div>
    <% end %>
    <% 8.times do %>
      <div class="middle"></div>
    <% end %>
    <div class="right"></div>
  </div>

  <div class="row mb-8">
    <div class="col-lg-3 offset-lg-3">
      <div class="pigci-logo-rails mb-2"></div>
      <h3 class="mb-4">Ruby on Rails</h3>
    </div>
    <div class="col-lg-3 align-self-center">
      <p class="text-left">PigCI currently supports Ruby on Rails, tested via Rspec.</p>
    </div>
  </div>
</section>
